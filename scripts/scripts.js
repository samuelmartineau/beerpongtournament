"use strict";angular.module("beerPongTournamentApp",["ngRoute","LocalStorageModule"]).config(["$routeProvider","$compileProvider",function(e,t){e.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/selectTournament",{templateUrl:"views/selecttournament.html",controller:"SelectTournamentCtrl"}).when("/teamNaming",{templateUrl:"views/teamnaming.html",controller:"TeamNamingCtrl"}).when("/manualTeamNaming",{templateUrl:"views/manualteamnaming.html",controller:"ManualTeamNamingCtrl"}).when("/groups",{templateUrl:"views/groups.html",controller:"GroupsCtrl"}).when("/playoffs/:round",{templateUrl:"views/playoffs.html",controller:"PlayoffsCtrl"}).when("/tables/:showButton",{templateUrl:"views/tables.html",controller:"TablesCtrl"}).when("/playoffsResults",{templateUrl:"views/playoffsresult.html",controller:"PlayoffsResultCtrl"}).when("/winner",{templateUrl:"views/winner.html",controller:"WinnerCtrl"}).when("/scorers",{templateUrl:"views/scorers.html",controller:"ScorersCtrl"}).when("/faq",{templateUrl:"views/faq.html"}).when("/rules",{templateUrl:"views/rules.html"}).when("/history",{templateUrl:"views/history.html"}).otherwise({redirectTo:"/"}),t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):|data:image\//)}]);
"use strict";angular.module("beerPongTournamentApp").controller("HomeCtrl",["$scope","localStorageService",function(t,e){t.isTournamentPlaying=e.get("tournamentSettings"),t.lastTournamentPath=e.get("tournamentPath")}]);
"use strict";angular.module("beerPongTournamentApp").controller("SelectTournamentCtrl",["$scope","$location","GroupEngine","Tournament","constants",function(e,r,n,a,o){var t,u;a.clearSettings(),e.callAlgo=function(r){t=r,e.showPlayoffs=!1;var a=n.getGroupFromNumberOfPlayers(r);e.groupsSelect=[];for(var u=0,f=a.length;f>u;u++)for(var s=0,p=a[u].configurations.length;p>s;s++)if(a[u].configurations[s].directTournament)e.groupsSelect.push({separator:"team of "+a[u].numberOfPlayers,value:"Tournament from "+o.PLAYOFF_NAME[a[u].configurations[s].step],directTournament:1,step:a[u].configurations[s].step,playersPerTeam:a[u].numberOfPlayers,numberOfTeams:+Math.pow(2,1+a[u].configurations[s].step)});else{var i=[];1===a[u].configurations[s].nbrOfGroups&&i.push({step:-1,value:"simple championship"});for(var m=0,l=a[u].configurations[s].playOffStepMin.length;l>m;m++)i.push({step:a[u].configurations[s].playOffStepMin[m],value:o.PLAYOFF_NAME[a[u].configurations[s].playOffStepMin[m]]});e.groupsSelect.push({separator:"team of "+a[u].numberOfPlayers,playersPerTeam:a[u].numberOfPlayers,value:a[u].configurations[s].nbrOfGroups+" group(s) of "+a[u].configurations[s].nbrOfTeam+" teams",playOffStepMin:a[u].configurations[s].playOffStepMin,playoffs:i,nbrOfGroups:a[u].configurations[s].nbrOfGroups,numberOfTeams:a[u].configurations[s].nbrOfTeam})}},e.getConfigFromNumberOfTeam=function(r){u=r;var a=n.getConfigsFromNumberOfTeams(r);e.configurationsManual=[];for(var t=0,f=a.length;f>t;t++)if(a[t].directTournament)e.configurationsManual.push({value:"Tournament from "+o.PLAYOFF_NAME[a[t].step],directTournament:1,step:a[t].step,numberOfTeams:r});else{var s=[];1===a[t].nbrOfGroups&&s.push({step:-1,value:"simple championship"});for(var p=0,i=a[t].playOffStepMin.length;i>p;p++)s.push({step:a[t].playOffStepMin[p],value:o.PLAYOFF_NAME[a[t].playOffStepMin[p]]});e.configurationsManual.push({value:a[t].nbrOfGroups+" group(s) of "+a[t].nbrOfTeam+" teams",playOffStepMin:a[t].playOffStepMin,playoffs:s,nbrOfGroups:a[t].nbrOfGroups,numberOfTeams:a[t].nbrOfTeam})}},e.goManualTeamNaming=function(e,n,o){a.clearSettings();var t={numberOfGroups:e.nbrOfGroups,numberOfTeamsPerGroup:e.numberOfTeams,playoffStepAfterGroup:n?n.step:void 0,isDirectTournament:e.directTournament,directTournamentStep:e.step,numberOfCupsToWin:o};a.init(t),r.path("/manualTeamNaming")},e.goNextStep=function(e,n,o){var u={numberOfPlayers:t,numberOfGroups:e.nbrOfGroups,numberOfTeamsPerGroup:e.numberOfTeams,numberOfPlayerPerTeam:e.playersPerTeam,playoffStepAfterGroup:n?n.step:void 0,isDirectTournament:e.directTournament,directTournamentStep:e.step,numberOfCupsToWin:o};a.init(u),r.path("/teamNaming")}}]);
"use strict";angular.module("beerPongTournamentApp").controller("TeamNamingCtrl",["$scope","$location","Tournament",function(r,a,e){function t(r){for(var a,e,t=r.length;0!==t;)e=Math.floor(Math.random()*t),t-=1,a=r[t],r[t]=r[e],r[e]=a;return r}var o,s=e.getNumberOfGroups(),n=e.getNumberOfTeamsPerGroup(),m=e.getNumberOfPlayerPerTeam(),p=e.isADirectTournament(),u=[],l=1,f=1;if(p){o={name:"Direct Tournament",teams:[]};for(var h=0;n>h;h++){o.teams.push({name:"Team "+l++,players:[]});for(var g=0;m>g;g++)f++,o.teams[h].players.push({name:"Player "+f,id:f})}u.push(o),r.groups=u}else for(var v=0,c=s;c>v;v++){o={name:"GROUP "+String.fromCharCode(65+v),teams:[]};for(var i=0,y=n;y>i;i++){o.teams.push({name:"Team "+l++,players:[]});for(var T=0,P=m;P>T;T++)o.teams[i].players.push({name:"Player "+f++,id:f})}u.push(o),r.groups=u}r.startTournament=function(){e.setTeams(r.groups),a.path(p?"/playoffs/0":"/groups")},r.switchPlayers=function(r){for(var a=[],e=0,o=r.teams.length;o>e;e++){var s=r.teams[e];a=a.concat(s.players)}t(a);for(var e=0,o=r.teams.length;o>e;e++){var s=r.teams[e];s.players=[];for(var n=0;m>n;n++)s.players.push(a.pop())}},r.random=function(){for(var a=[],e=0,o=u.length;o>e;e++)for(var s=0,n=u[e].teams.length;n>s;s++){var p=u[e].teams[s];a=a.concat(p.players)}t(a);for(var e=0,o=u.length;o>e;e++)for(var s=0,n=u[e].teams.length;n>s;s++){var p=u[e].teams[s];p.players=[];for(var l=0;m>l;l++)p.players.push(a.pop())}r.groups=u},r.switchTeam=function(){for(var a=[],e=0,o=u.length;o>e;e++)a=a.concat(u[e].teams);t(a);for(var e=0,o=u.length;o>e;e++)for(var s=0,n=u[e].teams.length;n>s;s++)u[e].teams[s]=a.pop();r.groups=u}}]);
"use strict";angular.module("beerPongTournamentApp").controller("PlayoffsCtrl",["$scope","$location","$routeParams","Tournament","constants",function(e,s,t,r,n){var a,l=angular.copy(r.getPlayoffs()),o=r.getNumberOfCupsToWin(),u=t.round,g=0,c=0;if(e.nbrOfCupsToWin=o,l[u].result){g=l[u].result.length,a=Math.log(g)/Math.log(2),e.title=n.PLAYOFF_NAME[a],e.games=l[u].result;for(var i=0,p=l[u].result.length;p>i;i++){var h=l[u].result[i];h.winner>-1&&g--}console.log("test",g),0===g&&(e.showNextStep=!0)}else{for(var f,m,y,v,w=angular.copy(l[u].divisions),P=[],M=0,N=w.length;N/2>M;M++){1===w.length?(f=w[0],m=w[0],y=f.teams.length/2,v=f.teams.length):(f=w[2*M],m=w[2*M+1],y=f.teams.length,v=f.teams.length);for(var i=0;y>i;i++){var d=f.teams[i],A=m.teams[v-i-1];g++;for(var x=[],F=[],O=d.players.length,T=A.players.length,W=0,b=Math.max(O,T);b>W;W++)O>W&&(d.players[W].score=0,x.push(angular.copy(d.players[W]))),T>W&&(A.players[W].score=0,F.push(angular.copy(A.players[W])));P.push({title:d.name+" vs "+A.name,match:[d,A],score:[0,0],scorers:[d.players,A.players],winner:-1,id:c++})}}a=Math.log(g)/Math.log(2),e.title=n.PLAYOFF_NAME[a],e.games=P}e.setWinner=function(s,t){-1===s.winner&&(g--,0===g&&(e.showNextStep=!0)),s.winner=t,l[u].result=e.games,r.setPlayoffs(l)},e.scoreUp=function(s,t,n){t[n]<o&&(t[n]=t[n]+1,s.score=s.score?s.score+1:1,l[u].result=e.games,r.setPlayoffs(l))},e.scoreDown=function(s,t,n,a){s.score>0&&(a.winner===n&&(a.winner=-1,g++),t[n]=t[n]-1,s.score=s.score-1,l[u].result=e.games,r.setPlayoffs(l))},e.goNextStep=function(){l[u].result=e.games;for(var t=[],n=parseInt(u)+1,a=0,o=l[u].result.length;o>a;a++)t.push(0===l[u].result[a].winner?l[u].result[a].match[0]:l[u].result[a].match[1]);l.push({divisions:[{teams:t}]}),r.setPlayoffs(l),t.length>1?s.path("/playoffs/"+n):(r.setWinner(t[0]),s.path("/winner"))}}]);
"use strict";angular.module("beerPongTournamentApp").controller("GroupsCtrl",["$scope","$location","Tournament",function(r,e,s){function o(r,e,s){for(var o=0,t=r.length;t>o;o++)r[o]=o===e[0]||o===e[1]?0:r[o]+1;for(var n=0,u=s.length;u>n;n++)s[n].priority=r[s[n].match[0]]+r[s[n].match[1]];s.sort(function(r,e){return e.priority-r.priority})}var t=s.getNumberOfCupsToWin(),n=0,u=0;if(r.nbrOfCupsToWin=t,r.showNextStep=!1,s.getGroupsResult()){r.numberOfGamesTotal=0;var a=s.getGroupsResult();r.groups=a;for(var p=0,l=a.length;l>p;p++)for(var f=0,h=a[p].rounds.length;h>f;f++)for(var i=0,c=a[p].rounds[f].length;c>i;i++)a[p].rounds[f][i].winner<0&&n++,r.numberOfGamesTotal++;r.numberOfGames=n,0===n&&(r.showNextStep=!0)}else{for(var g=[],m=s.getTeams(),v=0,G=m.length;G>v;v++){for(var y=m[v],b=m[v].teams,w=b.length,O=[],T=[],d=0,R=b.length;R>d;d++)T.push(0);for(var x=1,N=b.length;N>x;x++)for(var S=0;x-1>=S;S++){for(var C=[],W=[],M=b[x].players.length,$=b[S].players.length,f=0,h=Math.max(M,$);h>f;f++)M>f&&(b[x].players[f].score=0,C.push(angular.copy(b[x].players[f]))),$>f&&(b[S].players[f].score=0,W.push(angular.copy(b[S].players[f])));O.push({priority:0,match:[x,S],title:b[x].name+" vs "+b[S].name,score:[0,0],scorers:[C,W],winner:-1,id:u++})}for(n+=O.length,r.numberOfGamesTotal=n,r.numberOfGames=n,y.rounds=[];O.length>0;){for(var A=[],D=0,P=Math.floor(w/2);P>D;D++){var U=O.shift();A.push(U),o(T,U.match,O)}y.rounds.push(A)}g.push(y)}r.groups=g,s.setGroupsResult(r.groups)}r.setWinner=function(e,o){-1===e.winner&&(n--,r.numberOfGames=n,0===n&&(r.showNextStep=!0)),e.winner=o,s.setGroupsResult(r.groups)},r.scoreUp=function(e,o,n){o[n]<t&&(o[n]=o[n]+1,e.score=e.score?e.score+1:1,s.setGroupsResult(r.groups))},r.scoreDown=function(e,o,t,u){e.score>0&&(u.winner===t&&(u.winner=-1,n++,r.numberOfGames=n),o[t]=o[t]-1,e.score=e.score-1,s.setGroupsResult(r.groups))},r.goNextStep=function(){s.setGroupsResult(r.groups),e.path("/tables/1")}}]);
"use strict";angular.module("beerPongTournamentApp").controller("TablesCtrl",["$scope","$routeParams","$location","Tournament",function(e,a,t,r){var s=r.getPlayoffStepAfterGroup(),o=r.getTables(),n=r.getTeams(),u=(r.getPlayoffs(),parseInt(a.showButton)),f=r.getGroupsGamesResults();if(e.showButton=u,e.tables=o,e.groupsGamesResults=f,s>-1){var l=r.getNumberOfGroups(),m=Math.pow(2,s+1)/l;if(e.numberOfTeamsQualifiedPerGroups=m,u){for(var p=[],i=angular.copy(n),g=0;g<o.length;g++){for(var b=[],h=0;m>h;h++)for(var c=i[g].teams.length;c--;)if(i[g].teams[c].name===o[g].table[h].name){b.push(i[g].teams[c]);break}p.push({teams:b})}r.setTeamsQualifiedForPlayoff(p),e.goNextStep=function(){t.path("/playoffs/0")}}}else{e.numberOfTeamsQualifiedPerGroups=1;for(var T=o[0].table[0],i=angular.copy(n),c=i[0].teams.length;c--;)if(i[0].teams[c].name===T.name){r.setWinner(i[0].teams[c]);break}e.goNextStep=function(){t.path("/winner")}}}]);
"use strict";angular.module("beerPongTournamentApp").controller("WinnerCtrl",["$scope","Tournament",function(e,n){e.winner=n.getWinner(),e.scorers=n.getScorers(),console.log("playoffs",n.getPlayoffs())}]);
"use strict";angular.module("beerPongTournamentApp").controller("HeaderCtrl",["$scope","$location","Tournament","localStorageService",function(e,t,o,n){var a=t.url();e.goTournament=n.get("tournamentPath"),e.isOpen=!1,e.iconActive=-1,"/tables/0"===a?e.iconActive=1:"/scorers"===a?e.iconActive=2:"/playoffsResults"===a?e.iconActive=3:(n.set("tournamentPath","#"+a),e.goTournament="#"+a,e.iconActive=0),e.displayTablesButton=o.getTables(),e.displayScorersButton=o.getTeams(),e.displayPlayoffsResultButton=o.getPlayoffsResult(),e.toggleMenu=function(){e.isOpen=!e.isOpen}}]);
"use strict";angular.module("beerPongTournamentApp").controller("ScorersCtrl",["$scope","Tournament",function(e,r){e.scorers=r.getScorers();for(var t=r.getTeams(),a=[],n=[],o=0,s=t.length;s>o;o++){var l=t[o];a.push(l.name);for(var m=0,u=l.teams.length;u>m;m++){var c=l.teams[m];n.push(c.name)}}e.filterTypes=[a,n]}]);
"use strict";angular.module("beerPongTournamentApp").controller("ManualTeamNamingCtrl",["$scope","$location","Tournament",function(e,r,a){var n,s=a.getNumberOfTeamsPerGroup(),o=a.isADirectTournament(),m=o?1:a.getNumberOfGroups(),t=[],l=1,u=1,p=1;if(console.log(m,s),e.playersMinimum=m*s,o){n={name:"Direct Tournament",teams:[]};for(var i=0;s>i;i++)n.teams.push({name:"Team "+l++,players:[]});t.push(n),e.groups=t}else for(var f=0,y=m;y>f;f++){n={name:"GROUP "+String.fromCharCode(65+f),teams:[]};for(var g=0,c=s;c>g;g++)n.teams.push({name:"Team "+l++,players:[]});t.push(n),e.groups=t}e.addPlayer=function(r){0===r.players.length&&e.playersMinimum--,r.players.push({name:"Player "+u++,id:p++})},e.removePlayer=function(r,a){for(var n=r.players.length;n--;)if(r.players[n].id===a.id){r.players.splice(n,1);break}0===r.players.length&&e.playersMinimum++},e.startTournament=function(){a.setTeams(e.groups),r.path(o?"/playoffs/0":"/groups")}}]);
"use strict";angular.module("beerPongTournamentApp").controller("PlayoffsResultCtrl",["$scope","Tournament",function(e,l){e.playoffsResults=l.getPlayoffsResult()}]);
"use strict";angular.module("beerPongTournamentApp").factory("GroupEngine",function(){function r(r){var a=Math.log(r)/Math.log(2);return a===parseInt(a)}function a(a){var o=[];r(a)&&o.push({directTournament:1,step:Math.log(a/2)/Math.log(2)});for(var t=!0,n=0;t;){var u=a/Math.pow(2,n);if(u===parseInt(u)&&u>2){for(var e=Math.pow(2,n),f=a-e,i=Math.floor(Math.log(f)/Math.log(2)),s=Math.pow(2,i),h=!0,p=0,g=[];h;)3>e&&2*Math.pow(2,p)<=s?(g.push(Math.log(Math.pow(2,p))/Math.log(2)),p++):e>2&&e*Math.pow(2,p)<=s?(g.push(Math.log(e*Math.pow(2,p)/2)/Math.log(2)),p++):h=!1;o.push({nbrOfGroups:e,nbrOfTeam:u,playOffStepMin:g}),n++}else t=!1}return o}var o={};return o.getGroupFromNumberOfPlayers=function(r){var o=[];if(r>1){var t={numberOfPlayers:1,configurations:[]};t.configurations=a(r),o.push(t)}if(r%2===0&&r>4){var n={numberOfPlayers:2,configurations:[]};n.configurations=a(r/2),o.push(n)}if(r%3===0&&r>6){var u={numberOfPlayers:3,configurations:[]};u.configurations=a(r/3),o.push(u)}return o},o.getConfigsFromNumberOfTeams=function(r){var o=a(r);return o},o});
"use strict";angular.module("beerPongTournamentApp").service("Tournament",["localStorageService","constants",function(e,r){function t(e,r,t,n,s){for(var o=e.length;o--;)if(e[o].name===r){"win"===t?e[o].win+=1:"lose"===t&&(e[o].lose+=1),e[o].cupsFor+=n,e[o].cupsAgainst+=s;break}}function n(e,r,t,n){for(var s=e.length;s--;)if(e[s].id===r){e[s].score+=t,e[s].numberOfGame+=1,e[s].win+=+n;break}}var s=e.get("tournamentSettings")||!1,o=e.get("teams")||!1,a=e.get("groupResult")||!1,i=e.get("playoffs")||!1,u=e.get("winner")||!1;this.clearSettings=function(){e.clearAll(),u=s=o=a=i=!1},this.init=function(r){e.set("tournamentSettings",r),s=r},this.isADirectTournament=function(){return s.isDirectTournament},this.getNumberOfGroups=function(){return s.numberOfGroups},this.getDirectTournamentStep=function(){return s.directTournamentStep},this.getNumberOfTeamsPerGroup=function(){return s.numberOfTeamsPerGroup},this.getNumberOfPlayerPerTeam=function(){return s.numberOfPlayerPerTeam},this.setTeams=function(r){o=r,e.set("teams",r)},this.getTeams=function(){return o},this.setTeamsQualifiedForPlayoff=function(r){i=[{divisions:r}],e.set("playoffs",i)},this.setPlayoffs=function(r){e.set("playoffs",r),i=r},this.getPlayoffs=function(){return i?i:[{divisions:[{teams:o[0].teams}]}]},this.getNumberOfCupsToWin=function(){return s.numberOfCupsToWin},this.getPlayoffStepAfterGroup=function(){return s.playoffStepAfterGroup},this.getGroupsResult=function(){return a},this.getGroupsGamesResults=function(){if(a){for(var e=[],r=0,t=a.length;t>r;r++){for(var n=a[r],s=[],o=0,i=n.rounds.length;i>o;o++)for(var u=n.rounds[o],f=0,c=u.length;c>f;f++){var l=u[f];l.winner>-1&&s.push({teams:[n.teams[l.match[0]],n.teams[l.match[1]]],score:l.score,winner:l.winner})}e.push(s)}return e}return[]},this.getPlayoffsResult=function(){if(i){for(var e=[],t=0,n=i.length;n>t;t++){var o=i[t],a=s.playoffStepAfterGroup-t,u={step:a,stepName:r.PLAYOFF_NAME[a],games:[]};if(o.result){for(var f=0,c=o.result.length;c>f;f++){var l=o.result[f];l.winner>-1&&u.games.push({teams:[l.match[0],l.match[1]],score:l.score,winner:l.winner})}e.push(u)}}return e}return!1},this.setGroupsResult=function(r){e.set("groupResult",r),a=r},this.setWinner=function(r){e.set("winner",r),u=r},this.getWinner=function(){return u},this.getTables=function(){for(var e=[],r=0,n=a.length;n>r;r++){for(var s={name:a[r].name,table:[]},o=0,i=a[r].teams.length;i>o;o++){var u={name:a[r].teams[o].name,win:0,lose:0,cupsFor:0,cupsAgainst:0};s.table.push(u)}for(var f=0,c=a[r].rounds.length;c>f;f++)for(var l=0,m=a[r].rounds[f].length;m>l;l++){var h=a[r].rounds[f][l];if(h.winner>-1){var g=h.winner,p=+!h.winner;t(s.table,a[r].teams[h.match[g]].name,"win",h.score[g],h.score[p]),t(s.table,a[r].teams[h.match[p]].name,"lose",h.score[p],h.score[g])}}s.table.sort(function(e,r){if(r.win===e.win){var t=e.cupsFor-e.cupsAgainst,n=r.cupsFor-r.cupsAgainst;return n===t?e.cupsFor-r.cupsFor:n-t}return r.win-e.win}),e.push(s)}return e},this.getScorers=function(){for(var e=[],r=0,t=o.length;t>r;r++)for(var s=o[r],f=o[r].name,c=0,l=s.teams.length;l>c;c++)for(var m=o[r].teams[c],h=o[r].teams[c].name,g=0,p=m.players.length;p>g;g++){var v=m.players[g];v.score=0,v.numberOfGame=0,v.groupName=f,v.teamName=h,v.win=0,v.winner=u&&u.name===h?1:0,e.push(v)}if(a)for(var r=0,t=a.length;t>r;r++)for(var s=a[r],c=0,l=s.rounds.length;l>c;c++)for(var w=s.rounds[c],g=0,p=w.length;p>g;g++){var b=w[g];if(b.winner>-1)for(var d=b.scorers[0].length,T=b.scorers[1].length,y=0,G=Math.max(d,T);G>y;y++){if(d>y){var P=b.scorers[0][y];n(e,P.id,P.score,0===b.winner)}if(T>y){var A=b.scorers[1][y];n(e,A.id,A.score,1===b.winner)}}}if(i)for(var r=0,t=i.length;t>r;r++){var O=i[r];if(O.result)for(var c=0,l=O.result.length;l>c;c++){var b=O.result[c];if(b.winner>-1)for(var d=b.scorers[0].length,T=b.scorers[1].length,y=0,G=Math.max(d,T);G>y;y++){if(d>y){var P=b.scorers[0][y];n(e,P.id,P.score,0===b.winner)}if(T>y){var A=b.scorers[1][y];n(e,A.id,A.score,1===b.winner)}}}}return e.sort(function(e,r){return r.score-e.score}),e}}]);
"use strict";angular.module("beerPongTournamentApp").constant("constants",{PLAYOFF_NAME:["final","semi-final","quarter-final","16nd round","32nd round","64nd round","128 nd round","256 nd round","512 nd round"]});
"use strict";angular.module("beerPongTournamentApp").filter("scorers",function(){return function(r,e,n){if(0>e||e>-1&&!n)return r;if(0==e){for(var t=[],u=0,o=r.length;o>u;u++)r[u].groupName===n&&t.push(r[u]);return t}for(var t=[],u=0,o=r.length;o>u;u++)r[u].teamName===n&&t.push(r[u]);return t}});
"use strict";angular.module("beerPongTournamentApp").directive("progressbar",function(){return{restrict:"E",template:'<div class="progressbar"><div>{{current}}/{{total}}</div></div>',replace:!0,scope:{total:"=",current:"="},link:function(r,t){console.log(r.total,r.current);var e=angular.element(t.children());r.$watch("current",function(t){e.css("width",t/r.total*100+"%")})}}});